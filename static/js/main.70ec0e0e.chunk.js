(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{165:function(e){e.exports=JSON.parse('{"signInEnabled":true}')},176:function(e,t,a){e.exports=a(288)},181:function(e,t,a){},185:function(e,t){},187:function(e,t){},197:function(e,t){},199:function(e,t){},226:function(e,t){},227:function(e,t){},232:function(e,t){},234:function(e,t){},258:function(e,t){},288:function(e,t,a){"use strict";a.r(t);var n=a(18),r=a(0),c=a.n(r),o=a(11),i=a.n(o),u=(a(181),a(323)),l=a(324),m=a(335),s=a(159),f=a.n(s),p=function(e){var t=e.trim().toLowerCase(),a=f.a.createHash("md5").update(t,"binary").digest("hex");return"https://www.gravatar.com/avatar/".concat(a,"/?d=robohash")},d=a(331),b=a(74),E=a.n(b);a(283);E.a.initializeApp({apiKey:"AIzaSyCGCaeuco3o0f4EagJHvW3c16-BVel-IH8",authDomain:"dev-chatapp-bf41f.firebaseapp.com",databaseURL:"https://dev-chatapp-bf41f-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"dev-chatapp-bf41f",storageBucket:"dev-chatapp-bf41f.appspot.com",messagingSenderId:"759849648114",appId:"1:759849648114:web:f56f28d6190c2943eab56b",measurementId:"G-X6M95MY0WJ"});var v=E.a.database().ref("dev-chatApp"),g=function(e){var t=e.name,a=e.text;h();return v.push({name:t,text:a})},h=function(){return E.a.auth().currentUser},j=function(e){var t=e.inputEl,a=e.name,o=e.setText,i=e.text,u=Object(r.useState)(!1),l=Object(n.a)(u,2),m=l[0],s=l[1];return c.a.createElement(d.a,{autoFocus:!0,fullWidth:!0,inputRef:t,onChange:function(e){return o(e.target.value)},onKeyDown:function(e){if(!m){var t=e.target.value;""!==t&&"Enter"===e.key&&(g({name:a,text:t}),o(""),e.preventDefault())}},onCompositionStart:function(){return s(!0)},onCompositionEnd:function(){return s(!1)},value:i})},O=a(322),y=a(163),x=a.n(y),w=function(e){var t=e.inputEl,a=e.name,n=e.setText,r=e.text;return c.a.createElement(O.a,{disabled:""===r,onClick:function(){g({name:a,text:r}).then((function(){n(""),t.current.focus()})).catch((function(e){console.error("Error writing new message to Firebase",e)}))}},c.a.createElement(x.a,null))},S=Object(u.a)({root:{gridRow:2,margin:"26px"}}),C=function(e){var t=e.name,a=Object(r.useRef)(null),o=Object(r.useState)(""),i=Object(n.a)(o,2),u=i[0],s=i[1],f=S(),d=p(t);return c.a.createElement("div",{className:f.root},c.a.createElement(l.a,{container:!0},c.a.createElement(l.a,{item:!0,xs:1},c.a.createElement(m.a,{src:d})),c.a.createElement(l.a,{item:!0,xs:10},c.a.createElement(j,{inputEl:a,name:t,setText:s,text:u})),c.a.createElement(l.a,{item:!0,xs:1},c.a.createElement(w,{inputEl:a,name:t,setText:s,text:u}))))},I=a(166),k=a(321),N=a(325),T=a(326),D=a(327),R=a(75),W=a(164),J=a.n(W),L=Object(u.a)((function(){return{inline:{display:"inline"}}})),P=function(e){var t=e.isLastItem,a=e.name,n=e.text,o=e.id,i=Object(r.useRef)(null),u=L(),l=p(a);return Object(r.useEffect)((function(){t&&i.current.scrollIntoView({behavior:"smooth"})}),[t]),c.a.createElement(N.a,{divider:!0,ref:i},c.a.createElement(T.a,null,c.a.createElement(m.a,{src:l})),c.a.createElement(D.a,{primary:a,secondary:c.a.createElement(R.a,{component:"span",variant:"body2",className:u.inline,color:"textPrimary"},n)}),c.a.createElement(O.a,{edge:"end",onClick:function(){!function(e){v.doc(e).delete()}(o)}},c.a.createElement(J.a,null)))},B=Object(u.a)({root:{gridRow:1,overflow:"auto",width:"100%"}}),K=function(){var e=Object(r.useState)([]),t=Object(n.a)(e,2),a=t[0],o=t[1],i=B();Object(r.useEffect)((function(){v.orderByKey().limitToLast(15).on("value",(function(e){var t=e.val();if(null!==t){var a=Object.entries(t).map((function(e){var t=Object(n.a)(e,2),a=t[0],r=t[1];return Object(I.a)({key:a},r)}));o(a)}}))}),[]);var u=a.length;return c.a.createElement(k.a,{className:i.root},a.map((function(e,t){var a=e.key,n=e.name,r=e.text,o=u===t+1;return c.a.createElement(P,{key:a,name:n,text:r,isLastItem:o})})))},A=Object(u.a)({root:{display:"grid",height:"100vh",gridTemplateRows:"1fr auto"}}),F=function(e){var t=e.name,a=A();return c.a.createElement("div",{className:a.root},c.a.createElement(K,null),c.a.createElement(C,{name:t}))},H=a(330),M=a(329),V=a(332),z=a(328),G=Object(u.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function U(e){var t=e.setName,a=G(),o=Object(r.useState)(!0),i=Object(n.a)(o,2),u=i[0],l=i[1],m=Object(r.useState)(""),s=Object(n.a)(m,2),f=s[0],p=s[1],b=Object(r.useState)(!1),E=Object(n.a)(b,2),v=E[0],g=E[1];return Object(r.useEffect)((function(){l(""===f)}),[f]),c.a.createElement(z.a,{component:"main",maxWidth:"xs"},c.a.createElement(M.a,null),c.a.createElement("div",{className:a.paper},c.a.createElement(R.a,{component:"h1",variant:"h5"},"ChatConnect\u3078\u3088\u3046\u3053\u305d"),c.a.createElement("form",{className:a.form,noValidate:!0},c.a.createElement(d.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"\u30cb\u30c3\u30af\u30cd\u30fc\u30e0",name:"name",autoFocus:!0,onChange:function(e){return p(e.target.value)},onKeyDown:function(e){v||"Enter"===e.key&&(t(e.target.value),e.preventDefault())},onCompositionStart:function(){return g(!0)},onCompositionEnd:function(){return g(!1)}}),c.a.createElement(H.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,disabled:u,onClick:function(){t(f)}},"start ChatConnect!"))),c.a.createElement(V.a,{mt:8}))}var q=a(165),X=function(){var e=Object(r.useState)(""),t=Object(n.a)(e,2),a=t[0],o=t[1];return q.signInEnabled&&""===a?c.a.createElement(U,{setName:o}):c.a.createElement(F,{name:a})},Y=function(e){var t=e.correctPassword,a=e.onSuccess,o=Object(r.useState)(""),i=Object(n.a)(o,2),u=i[0],l=i[1];return c.a.createElement("div",null,c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),u===t?a():(alert("Wrong password. Please try again."),l(""))}},c.a.createElement("label",null,"Please enter password:",c.a.createElement("input",{type:"password",value:u,onChange:function(e){return l(e.target.value)}})),c.a.createElement("input",{type:"submit",value:"Submit"})))},Q=function(){var e=Object(r.useState)(!1),t=Object(n.a)(e,2),a=t[0],o=t[1];return a?c.a.createElement(X,null):c.a.createElement(Y,{correctPassword:"mil5",onSuccess:function(){return o(!0)}})};i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(Q,null)),document.getElementById("root"))}},[[176,1,2]]]);
//# sourceMappingURL=main.70ec0e0e.chunk.js.map